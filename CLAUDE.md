# SNOW ITOM Auditor - ServiceNow Compliance Auditor

## Overview
Automated compliance auditing across CMDB, Discovery, and Asset Management domains. Generates compliance scores, remediation plans, trend analysis, and audit history with persistent local storage.

## Core Principles (NON-NEGOTIABLE)
1. **ZERO MOCKS** — Every API call, data point, and integration must be real. No mock data, no hardcoded values, no stub implementations. If the ServiceNow instance isn’t available, STOP and report the blocker.
2. **FAIL-STOP** — If any agent or tool encounters an error, the pipeline halts. No silent failures. No workarounds. Fix the issue, then resume.
3. **READ-ONLY AUDITING** — Audit tools only read from ServiceNow. Remediation tools create plans but do not execute changes without confirmation.
4. **SEVERITY-WEIGHTED SCORING** — Compliance scores weight findings by severity (critical > high > medium > low).

## Architecture
```
FastMCP Server (server.py)
  |
  +-- Audit Tools (audit_cmdb, audit_discovery, audit_assets, audit_full)
  +-- Compliance Tools (compliance_rules, compliance_score, compliance_report)
  +-- History Tools (audit_history, audit_compare)
  +-- Remediation Tools (remediation_create, remediation_progress, remediation_validate)
  +-- Health Check (health_check)
  |
  +-- AuditEngine (engine.py) + ScoringEngine (scoring.py)
  +-- Storage Layer (.snow-audit/) — persistent audit history
  +-- ServiceNowClient (client.py) -> ServiceNow REST API
```

## MCP Tools (13 tools)
| Tool | Purpose |
|------|---------|
| `audit_cmdb` | Audit CMDB data quality and completeness |
| `audit_discovery` | Audit discovery configuration and results |
| `audit_assets` | Audit asset management compliance |
| `audit_full` | Full cross-domain audit |
| `compliance_rules` | Manage compliance rule definitions |
| `compliance_score` | Calculate compliance scores |
| `compliance_report` | Generate compliance reports |
| `audit_history` | View past audit results |
| `audit_compare` | Compare two audit runs |
| `remediation_create` | Create remediation plans |
| `remediation_progress` | Track remediation progress |
| `remediation_validate` | Validate remediation completion |
| `health_check` | System health check |

## ServiceNow Tables
| Table | Purpose |
|-------|---------|
| `cmdb_ci` | Base CI table |
| `cmdb_ci_server` | Server CIs |
| `cmdb_rel_ci` | CI Relationships |
| `discovery_schedule` | Discovery schedules |
| `sa_pattern` | Discovery patterns |
| `alm_license` | Software licenses |
| `alm_hardware` | Hardware assets |
| `alm_asset` | Base asset table |

## Configuration
- **Env prefix:** `SERVICENOW_*`
- **Key variables:** `SERVICENOW_INSTANCE`, `SERVICENOW_USERNAME`, `SERVICENOW_PASSWORD`
- **Additional:** `AUDIT_STORAGE_PATH` (defaults to `.snow-audit/`)

## Key Files
- `src/snow_itom_auditor/server.py` — MCP server entry point
- `src/snow_itom_auditor/engine.py` — Core audit engine
- `src/snow_itom_auditor/scoring.py` — Compliance scoring engine
- `src/snow_itom_auditor/tools/` — Tool modules

## Git Workflow
- All agent work happens on feature branches
- PRs for human review before merging
- Never push directly to main

---

<!-- BEGIN AGENT FORGE MANAGED SECTION -->
<!-- Generated by Agent Forge on 2026-02-12T21:45:00Z -->
<!-- Template version: 1.0.0 -->

# Agent Forge - Project Integration

This project is managed by [Agent Forge](https://github.com/amragl/agent-forge), a multi-agent SDLC orchestration system.

## Core Principles (NON-NEGOTIABLE)

1. **ZERO MOCKS** -- Every function, data point, and integration must be real. No mock data, no hardcoded values, no stub implementations. If real data or APIs are not available, the agent must STOP and report the blocker.
2. **FAIL-STOP** -- If any agent, tool, hook, or skill encounters an error, the entire pipeline halts. No silent failures. No workarounds. Fix the issue, then resume.
3. **GitHub-Native** -- All work happens through proper git workflow: branches, commits, PRs, issues. No direct pushes to main.

## Git Workflow

- **Main branch:** `main`
- **Development branch:** `main`
- **Feature branches:** `feature/<ticket-id>-<description>`
- **Fix branches:** `fix/<ticket-id>-<description>`
- **Agent branches:** `agent/<agent-name>/<ticket-id>`
- Never push directly to `main`
- All changes go through pull requests targeting `main`

## Agent Forge Integration

- **Hub location:** `/Users/amragl/Python Projects/agent-forge`
- **Project config:** `.agent-forge/project.json`
- **Pipeline state:** `.agent-forge/state/pipeline.json`
- **Backlog:** `.agent-forge/plans/backlog.json`
- **Test cases:** `.agent-forge/tests/test-cases.json`
- **Reports:** `.agent-forge/reports/`

### Available Commands

- `/forge-plan` -- Invoke Plan Agent (roadmap, backlog, ticket selection)
- `/forge-build` -- Invoke Build Agent (implement tickets via branches and PRs)
- `/forge-validate` -- Invoke Validate Agent (code quality, mock detection)
- `/forge-test` -- Invoke Test Agent (test generation, execution, regression tracking)
- `/forge-monitor` -- Invoke Monitor Agent (health checks, pattern analysis)
- `/forge-improve` -- Invoke Improve Agent (improvement proposals)
- `/forge-status` -- Show current state of all agents and tickets
- `/forge-run` -- Run full pipeline (Plan -> Build -> Validate -> Test -> Monitor)
- `/forge-dashboard` -- Unified dashboard with pipeline, health, progress

## Labels Convention

GitHub issues use these labels:
- `agent:plan`, `agent:build`, `agent:validate`, `agent:test`, `agent:monitor`, `agent:improve`
- `priority:critical`, `priority:high`, `priority:medium`, `priority:low`
- `type:feature`, `type:bug`, `type:improvement`, `type:tech-debt`
- `status:blocked`, `status:in-progress`, `status:review`, `status:done`

## Tech Stack

- **Languages:** Python 3.11+
- **Frameworks:** FastMCP, Pydantic
- **Other:** ServiceNow REST API, MCP Protocol

<!-- END AGENT FORGE MANAGED SECTION -->
